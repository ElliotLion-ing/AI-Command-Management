# Tool Specification: get_command

## Overview

| Property | Value |
|----------|-------|
| **Tool Name** | `get_command` |
| **Category** | Command Retrieval |
| **Purpose** | Retrieve full command definition by name |

## Description

Get the complete definition of a command by its name. Returns the full Markdown content, metadata, and execution hints. This is typically used after `search_commands` to retrieve the details of a specific command.

## Input Schema

```json
{
  "type": "object",
  "properties": {
    "command_name": {
      "type": "string",
      "description": "Name of the command to retrieve (with or without .md extension)",
      "required": true,
      "examples": ["analyze_zoom_speech_sdk_log", "proxy-slow-meeting-analysis-command.md"]
    }
  },
  "required": ["command_name"]
}
```

## Output Schema

```json
{
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "description": "Command name (without extension)"
    },
    "content": {
      "type": "string",
      "description": "Full Markdown content of the command"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "path": {
          "type": "string",
          "description": "Full file path to the command"
        },
        "size": {
          "type": "number",
          "description": "File size in bytes"
        },
        "last_modified": {
          "type": "string",
          "format": "date-time",
          "description": "Last modification timestamp (ISO 8601)"
        },
        "description": {
          "type": "string",
          "description": "Brief description extracted from command"
        }
      }
    },
    "next_steps": {
      "type": "string",
      "description": "Hints for AI on what to do after executing this command (optional, for analysis commands)"
    }
  }
}
```

## Implementation Requirements

### Core Logic

1. **Input Normalization**
   - Remove `.md` extension if present
   - Validate command name format (alphanumeric, underscores, hyphens only)

2. **File Resolution**
   - Construct file path: `{commands_directory}/{command_name}.md`
   - Check file existence and readability

3. **Content Parsing**
   - Read file content as UTF-8
   - Parse frontmatter (YAML) if present using gray-matter or similar
   - Extract description from first paragraph or frontmatter

4. **Metadata Collection**
   - Get file stats (size, modification time)
   - Build complete metadata object

5. **Analysis Command Detection**
   - Check if command name/content contains analysis-related keywords
   - Keywords: `analyze`, `analysis`, `diagnostic`, `debug`, `inspect`, `investigate`, `report`
   - If analysis command, add `next_steps` hint for report handling

### Security Considerations

- Validate command name to prevent path traversal attacks
- Only access files within configured commands directory
- Reject names containing `..`, `/`, or `\`

### Caching

- Cache parsed command content with configurable TTL
- Invalidate cache on file modification

## Usage Examples

### Example 1: Get Analysis Command
```json
// Input
{
  "command_name": "analyze_zoom_speech_sdk_log"
}

// Output
{
  "name": "analyze_zoom_speech_sdk_log",
  "content": "# Zoom Speech SDK Log Analyzer\n\n## Purpose\nAnalyze Zoom Speech SDK log files...",
  "metadata": {
    "path": "/opt/acmt/Commands/analyze_zoom_speech_sdk_log.md",
    "size": 4096,
    "last_modified": "2025-11-20T10:30:00.000Z",
    "description": "Analyzes Zoom Speech SDK log files for issues and performance problems"
  },
  "next_steps": "üìù ÈáçË¶ÅÊèêÁ§∫: ÂΩìÊ≠§ÂëΩ‰ª§ÊâßË°åÂÆåÊàêÂπ∂ÁîüÊàêÊä•ÂëäÂêéÔºåËØ∑Âä°ÂøÖË∞ÉÁî® 'report_feedback' Â∑•ÂÖ∑..."
}
```

### Example 2: Get Regular Command
```json
// Input
{
  "command_name": "log-type-identification"
}

// Output
{
  "name": "log-type-identification",
  "content": "# Log Type Identification Rules\n\n## Overview\nThis document defines...",
  "metadata": {
    "path": "/opt/acmt/Commands/log-type-identification.md",
    "size": 2048,
    "last_modified": "2025-10-15T08:00:00.000Z",
    "description": "Rules for identifying different log types"
  }
}
```

## Error Handling

| Error Code | Description | Resolution |
|------------|-------------|------------|
| `INVALID_COMMAND_NAME` | Command name contains invalid characters | Use alphanumeric, underscores, hyphens only |
| `COMMAND_NOT_FOUND` | Command file doesn't exist | Check command name spelling |
| `FILE_READ_ERROR` | Cannot read command file | Check file permissions |

## Related Tools

- `search_commands`: Find commands by query
- `list_commands`: Browse all available commands
- `report_feedback`: Handle reports generated by analysis commands

